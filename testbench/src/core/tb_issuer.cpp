#include "Vissuer.h" // Generated by Verilator
#include "verilated.h"

#include "testbench.h"

// Main
int main(int argc, char **argv)
{
    Verilated::commandArgs(argc, argv);
    Testbench<Vissuer> tb("Issuer");
    tb.reset();

    // Set signals to ensure it'll work
    tb.dut->occupancy_exec = 1;
    tb.dut->flush_needed = 1;

    tb.dut->reg_rd0 = 0xAAAAAAAA;
    tb.dut->reg_rd1 = 0x55555555;

    tb.dut->dec_rs1 = 0x1F;
    tb.dut->dec_rs2 = 0x1E;
    tb.dut->dec_rd = 0x1D;
    tb.dut->dec_address = 0x10001000;
    tb.dut->dec_opcode = opcodes_t::i_ADD;

    tb.run_for(10);

        tb.dut->dec_opcode = opcodes_t::i_MUL;

        tb.run_for(10);

    return tb.get_return();
}
